<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:b="http://bootsfaces.net/ui"
	template="/WEB-INF/templates/Layout.xhtml">
	
<ui:define name="content">

<f:metadata>
	<f:viewAction action="#{clienteController.listarClientes}" />
</f:metadata>

<div class="page-header">
	<div class="container-fluid">
		<div class="row">
			<div class="col-md-8 col-xs-12">
				<h1>Clientes<small>Pesquisa</small></h1>
			</div>
			<div class="col-md-4 col-xs-12">
				<ol class="breadcrumb">
				  <li><a href="/Dashboard.xhtml"><i class="fa fa-home"></i> Dashboard</a></li>
				  <li><a href="#{request.contextPath}/modulos/PesquisaCliente.xhtml">Clientes</a></li>
				  <li class="active">Pesquisa</li>
				</ol>
			</div>
		</div>
	</div>
</div>

<div class="container-fluid">
	
	<b:form>
		
		<div class="col-md-12">
						
	    	<p:dataTable id="clienteTable" value="#{pesquisaClienteBean.lazyClientes}" var="cliente" widgetVar="tabelaClientes"
		    		style="margin-top: 20px" emptyMessage="Nenhum cliente encontrado." rows="15"
		    		paginator="true" paginatorAlwaysVisible="false" paginatorPosition="bottom"
		    		lazy="true" reflow="true" rowsPerPageTemplate="15, 20, 25">

			    <f:facet name="header">
			       	Clientes cadastrados	 
			        <p:commandLink id="toggler" type="button"  style="float:right" styleClass="hidden-xs">
			        	<span><i class="fa fa-binoculars"/> Exibir</span>
			        </p:commandLink>
			        
			        <p:columnToggler datasource="clienteTable" trigger="toggler" />
			    </f:facet>
		    
		    	<p:column headerText="Nome" sortBy="#{cliente.nome}" filterBy="#{cliente.nome}">
		    		<h:outputText value="#{cliente.nome}"/>
		    	</p:column>

		    	<p:column headerText="CPF / CNPJ" sortBy="#{cliente.cpfOuCnpj}" filterBy="#{cliente.cpfOuCnpj}">
		    		<h:outputText value="#{cliente.cpfOuCnpj}"/>
		    	</p:column>
		    	
		    	<p:column headerText="Telefone" sortBy="#{cliente.telefone}" filterBy="#{cliente.telefone}">
		    		<h:outputText value="#{cliente.telefone}"/>
		    	</p:column>

		    	<p:column headerText="E-mail" sortBy="#{cliente.email}" filterBy="#{cliente.email}">
		    		<h:outputText value="#{cliente.email}"/>
		    	</p:column>		    	

		    	<p:column headerText="Endereço" sortBy="#{cliente.endereco.logradouro}" filterBy="#{cliente.endereco.logradouro}">
		    		<h:outputText value="#{cliente.endereco.logradouro}, #{cliente.endereco.numero}"/>
		    	</p:column>

		    	<p:column headerText="Opções" style="text-align:center">
		             <p:commandLink title="Editar" style="margin-right: 15px">
		                <f:setPropertyActionListener value="#{cliente}" target="#{dtSelectionView.selectedCar}" />
		                <i class="fa fa-pencil"/>
		            </p:commandLink>

		             <p:commandLink title="Excluir" style="margin-right: 15px">
		                <f:setPropertyActionListener value="#{cliente}" target="#{dtSelectionView.selectedCar}" />
		                <i class="fa fa-trash"/>
		            </p:commandLink>	
		            
		             <p:commandLink title="Visualizar">
		                <f:setPropertyActionListener value="#{cliente}" target="#{dtSelectionView.selectedCar}" />
		                <i class="fa fa-search"/>
		            </p:commandLink>			            
		            		    		
		    	</p:column>			    			
		    	
		    </p:dataTable>			
				
		</div>
		
	</b:form>
</div>

</ui:define>

</ui:composition>